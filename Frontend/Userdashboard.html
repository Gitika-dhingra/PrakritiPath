<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PrakritiPath Dashboard</title>
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700&family=Inter:wght@300;400;500;600&display=swap" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        :root {
            --dark-bg: #475569;      
            --light-text: #F3F4F6;    
            --rose-gold-dark: #B76E79;    
            --rose-gold-mid: #D9A7C7;  
            --rose-gold-light: #F3E5F5;  
            --sunset-dark: #DD6B20;    
            --sunset-light: #FDBA74;    
            --golden-primary: #D4AF37; 
            --golden-hover: #E8C15E;   
            --hover-bg-color: #FFF7ED; 
            --primary-text-color: #1f2937; 
            --main-bg-color: #f3f4f6;      
        }

        body {
            background-color: var(--main-bg-color);
            overflow: hidden;
            position: relative;
            font-family: 'Inter', sans-serif;
            color: var(--primary-text-color);
        }
        .wave-container { position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: -1; }
        .wave {
            background: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 800 88.7'%3E%3Cpath d='M800 56.9c-155.5 0-204.9-50-405.5-49.9-200 0-250 49.9-394.5 49.9v31.8h800v-.2-31.6z'/%3E%3C/svg%3E");
            position: absolute; width: 200%; height: 100%; background-repeat: repeat-x; background-size: contain; background-position: center; animation: wave-animation 40s linear infinite;
        }
        #wave1 { bottom: 5vh; opacity: 0.3; fill: #e5e7eb; }
        #wave2 { bottom: 2vh; opacity: 0.4; animation-duration: 35s; animation-direction: reverse; fill: #d1d5db; }
        #wave3 { bottom: -1vh; opacity: 0.5; animation-duration: 30s; fill: #9ca3af; }
        @keyframes wave-animation { 0% { transform: translateX(0); } 50% { transform: translateX(-50%); } 100% { transform: translateX(0); } }

        .themed-border {
            position: relative;
            border-radius: 18px;
            padding: 2px;
            box-shadow: 0 8px 24px rgba(0,0,0,0.08);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            overflow: hidden;
            cursor: pointer;
        }
        
        .themed-border::before {
            content: '';
            position: absolute; top: 0; left: 0; right: 0; bottom: 0;
            background: linear-gradient(115deg, var(--rose-gold-light), var(--rose-gold-mid), var(--rose-gold-dark), var(--rose-gold-light));
            background-size: 300% 100%;
            background-position: 0% 50%;
            border-radius: 16px;
            z-index: 0;
            transition: background 0.6s ease;
        }

        .card-content {
            position: relative;
            background: var(--dark-bg);
            color: var(--light-text);
            border-radius: 16px;
            height: 100%;
            width: 100%;
            display: flex;
            flex-direction: column;
            transition: background-color 0.6s ease, color 0.6s ease;
            z-index: 1; 
        }
        
        .card-content .card-header-bg {
            background-color: rgba(0,0,0,0.2);
            color: white;
            transition: background-color 0.6s ease, color 0.6s ease;
            padding: 0.75rem;
            display: flex;
            align-items: center;
            gap: 0.75rem;
            font-weight: 600;
            border-radius: 14px 14px 0 0;
        }
        
        .card-content p, .card-content a { color: var(--light-text); transition: color 0.6s ease; }
        .card-content strong { color: white; transition: color 0.6s ease; }

        .card-hover:hover {
            transform: translateY(-8px);
            box-shadow: 0 12px 32px rgba(0,0,0,0.15);
        }

        .card-hover:hover::before {
            background: linear-gradient(115deg, var(--sunset-light), var(--sunset-dark), var(--sunset-light));
        }
        
        .card-hover:hover .card-content {
            background-color: var(--hover-bg-color);
            color: var(--primary-text-color);
        }
        .card-hover:hover .card-content .card-header-bg {
            background-color: var(--dark-bg);
            color: white;
        }
        .card-hover:hover .card-content p, 
        .card-hover:hover .card-content a {
            color: var(--dark-bg);
        }
        .card-hover:hover .card-content strong {
            color: var(--primary-text-color);
        }

        header { border-bottom-color: var(--rose-gold-mid); }
        .date-cell { 
            position: relative;
            display: flex; 
            align-items: center; 
            justify-content: center; 
            width: 40px; 
            height: 40px; 
            border-radius: 50%; 
            transition: all 0.2s ease-in-out; 
            cursor: pointer; 
        }
        .date-cell.today { background-color: var(--rose-gold-mid); color: var(--primary-text-color); font-weight: 700; }
        .date-cell.selected { transform: scale(1.1); box-shadow: 0 0 0 3px var(--sunset-dark); }
        .date-cell:not(.today):hover { background-color: rgba(217, 167, 199, 0.15); }

        .date-cell.visited {
            border: 2px solid #22c55e;
            font-weight: 600;
            color: #15803d;
        }

        .date-dot {
            position: absolute;
            bottom: 4px;
            left: 50%;
            transform: translateX(-50%);
            width: 5px;
            height: 5px;
            border-radius: 50%;
        }

        .btn-primary { 
            background-color: var(--golden-primary); 
            color: var(--primary-text-color);
            font-weight: 600; 
            padding: 0.6rem 1.2rem; 
            border-radius: 10px; 
            transition: all 0.3s ease; 
        }
        .btn-primary:hover { 
            background-color: var(--golden-hover); 
            transform: translateY(-2px); 
        }
        .btn-secondary { 
            background-color: transparent; 
            border: 2px solid var(--golden-primary);
            color: var(--golden-primary); 
        }
        .btn-secondary:hover { 
            background-color: var(--golden-primary); 
            color: var(--primary-text-color); 
        }
        
        .chatbot-icon { 
            background-color: var(--rose-gold-mid); 
            color: var(--dark-bg); 
        }
        .chatbot-icon:hover { 
            background-color: var(--sunset-dark); 
            color: white; 
        }

        footer { background-color: var(--dark-bg); color: var(--light-text); }
    </style>
</head>
<body class="min-h-screen">

<div class="wave-container">
    <div class="wave" id="wave1"></div>
    <div class="wave" id="wave2"></div>
    <div class="wave" id="wave3"></div>
</div>

<div class="relative z-10 h-screen overflow-y-auto">

    <header class="flex justify-between items-center bg-white/70 backdrop-blur-md shadow-sm px-6 py-3 sticky top-0 border-b-4">
        <h1 class="text-3xl font-bold" style="font-family: 'Cinzel', serif;">PrakritiPath</h1>
        <nav class="flex items-center gap-4">
            <a href="bookconsultation.html" class="btn-primary">Book Consultation</a>
            <a href="registration/logout.html" class="btn-primary btn-secondary">Logout</a>
        </nav>
    </header>

    <main class="p-6">
        <section class="flex flex-col lg:flex-row gap-6 mb-6">
            <div class="lg:flex-1 themed-border card-hover">
                <div class="card-content p-5">
                    <div class="flex justify-between items-center mb-4">
                        <button id="prevMonth" aria-label="Previous Month" class="p-2 rounded-full hover:bg-gray-200 transition text-gray-800">&lt;</button>
                        <h3 id="monthYear" class="font-semibold text-xl">September 2025</h3>
                        <button id="nextMonth" aria-label="Next Month" class="p-2 rounded-full hover:bg-gray-200 transition text-gray-800">&gt;</button>
                    </div>
                    <div id="calendar" class="grid grid-cols-7 gap-1 text-center font-medium"></div>
                </div>
            </div>

            <div class="lg:w-1/3 themed-border card-hover">
                <div class="card-content">
                    <div class="card-header-bg">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z" /></svg>
                        <span>Next Appointment</span>
                    </div>
                    <div class="p-4 space-y-2 text-sm" id="nextAppointmentDetails">
                        <p><strong>Doctor:</strong> Dr. Deepu John</p>
                        <p><strong>Date & Time:</strong> 22 Sep 2025, 10:00 AM</p>
                        <p class="text-xs mt-2">Please arrive 15 minutes early and carry previous reports.</p>
                    </div>
                </div>
            </div>
        </section>

        <section id="dashboardGrid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"></section>
    </main>

    <footer class="text-center py-4 mt-6">
        <p class="text-sm opacity-80">Â© 2025 PrakritiPath. All Rights Reserved.</p>
    </footer>

</div>

<a href="chatbot.html" class="chatbot-icon fixed bottom-6 right-6 w-16 h-16 rounded-full flex items-center justify-center text-3xl shadow-xl hover:scale-110 transition-transform z-20">
    <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z" /></svg>
</a>


<script>
    const API_BASE_URL = "https://bac-1ntv.onrender.com";

    document.addEventListener('DOMContentLoaded', () => {

    const config = {
        elements: {
            calendar: document.getElementById('calendar'),
            monthYear: document.getElementById('monthYear'),
            prevMonthBtn: document.getElementById('prevMonth'),
            nextMonthBtn: document.getElementById('nextMonth'),
            dashboardGrid: document.getElementById('dashboardGrid'),
        },
        monthNames: ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"],
        dayNames: ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'],
        // Mock data removed, now fetched from API
        dashboardItems: [
            { title: 'Health History', icon: '<svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01" /></svg>', content: ['View your past consultations and prescriptions.', '<a href="previousconsultation.html" class="btn-primary text-xs mt-2 inline-block">View History</a>'] },
            { title: 'Reminders', icon: '<svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9" /></svg>', content: ['No new reminders.'] },
            { title: 'Lab Reports', icon: '<svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M7 21a4 4 0 01-4-4V5a2 2 0 012-2h4l2 2h4a2 2 0 012 2v12a4 4 0 01-4 4H7z" /></svg>', content: ['View your previous lab reports.', '<a href="labreports.html" class="btn-primary text-xs mt-2 inline-block">View Reports</a>'] },
            { title: 'Order Medicines', icon: '<svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z" /></svg>', content: ['Order prescribed medicines online.', '<a href="previousorder.html" class="btn-primary text-xs mt-2 inline-block">Order Now</a>'] },
            { title: 'Therapy Bookings', icon: '<svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M5 13l4 4L19 7" /></svg>', content: ['Book Panchakarma or other therapies.', '<a href="therapies.html" class="btn-primary text-xs mt-2 inline-block">Book Therapy</a>'] },
            { title: 'Chatbot', icon: '<svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z" /></svg>', content: ['Ask our AI Chatbot anything about Ayurveda.', '<a href="chatbot.html" class="btn-primary text-xs mt-2 inline-block">Chat Now</a>'] }
        ]
    };

    const state = {
        today: new Date('2025-09-21T00:00:00'),
        currentMonth: 8, 
        currentYear: 2025,
    };

    function renderDashboardGrid() {
        const grid = config.elements.dashboardGrid;
        grid.innerHTML = '';
        config.dashboardItems.forEach(item => {
            const cardWrapper = document.createElement('div');
            cardWrapper.className = 'themed-border card-hover h-full';
            let contentHTML = item.content.map(c => `<p class="text-sm">${c}</p>`).join('');

            cardWrapper.innerHTML = `
                <div class="card-content">
                    <div class="card-header-bg">
                        ${item.icon}
                        <span>${item.title}</span>
                    </div>
                    <div class="p-4 space-y-2 flex-grow">
                        ${contentHTML}
                    </div>
                </div>
            `;
            grid.appendChild(cardWrapper);
        });
    }

    const calendarFunctions = {
        renderCalendar: () => {
            const { calendar, monthYear } = config.elements;
            const { currentMonth, currentYear } = state;
            const firstDayOfMonth = new Date(currentYear, currentMonth, 1).getDay();
            const daysInMonth = new Date(currentYear, currentMonth + 1, 0).getDate();
            calendar.innerHTML = '';
            config.dayNames.forEach(day => {
                const dayEl = document.createElement('div');
                dayEl.className = 'font-bold text-sm text-center text-slate-700 py-2';
                dayEl.textContent = day;
                calendar.appendChild(dayEl);
            });
            for (let i = 0; i < firstDayOfMonth; i++) calendar.appendChild(document.createElement('div'));
            for (let day = 1; day <= daysInMonth; day++) calendar.appendChild(calendarFunctions.createDateCell(day, currentMonth, currentYear));
            monthYear.textContent = `${config.monthNames[currentMonth]} ${currentYear}`;
        },
        createDateCell: (day, month, year) => {
            const cell = document.createElement('div');
            cell.className = 'flex flex-col items-center justify-center p-1';
            
            const dateEl = document.createElement('span');
            dateEl.className = 'date-cell'; 
            dateEl.textContent = day;
            
            const appointment = config.appointments.find(app => new Date(app.date).toDateString() === new Date(year, month, day).toDateString());
            
            if (appointment) {
                if (appointment.status === 'visited') {
                    dateEl.classList.add('visited');
                } else {
                    const indicator = document.createElement('span');
                    indicator.className = 'date-dot ' + { missed: 'bg-red-500', upcoming: 'bg-yellow-500' }[appointment.status];
                    cell.appendChild(indicator); 
                }
            }

            cell.appendChild(dateEl); 
            
            if (day === state.today.getDate() && month === state.today.getMonth() && year === state.today.getFullYear()) {
                dateEl.classList.add('today');
            }

            dateEl.addEventListener('click', () => { 
                const prev = config.elements.calendar.querySelector('.selected');
                if (prev) prev.classList.remove('selected');
                dateEl.classList.add('selected');
            });
            return cell;
        },
        changeMonth: (offset) => {
            state.currentMonth += offset;
            if (state.currentMonth < 0) { state.currentMonth = 11; state.currentYear--; }
            else if (state.currentMonth > 11) { state.currentMonth = 0; state.currentYear++; }
            calendarFunctions.renderCalendar();
        },
        init: () => {
            config.elements.prevMonthBtn.addEventListener('click', () => calendarFunctions.changeMonth(-1));
            config.elements.nextMonthBtn.addEventListener('click', () => calendarFunctions.changeMonth(1));
            calendarFunctions.renderCalendar();
            renderDashboardGrid();
        }
    };
    calendarFunctions.init();
});
</script>
</body>
</html>